<!doctype html>
<html>
    <head>
        <title>Automate sprites with css-sprite &amp; stylus</title>

        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <!-- Stylesheets -->
        <link rel="stylesheet" href="./theme/css/build/compiled.css" />

        <!-- Typekit -->
        <script>
            (function(d) {
                var config = {
                    kitId: 'umd0yin',
                    scriptTimeout: 3000
                },
                h=d.documentElement,t=setTimeout(function(){h.className=h.className.replace(/\bwf-loading\b/g,"")+" wf-inactive";},config.scriptTimeout),tk=d.createElement("script"),f=false,s=d.getElementsByTagName("script")[0],a;h.className+=" wf-loading";tk.src='//use.typekit.net/'+config.kitId+'.js';tk.async=true;tk.onload=tk.onreadystatechange=function(){a=this.readyState;if(f||a&&a!="complete"&&a!="loaded")return;f=true;clearTimeout(t);try{Typekit.load(config)}catch(e){}};s.parentNode.insertBefore(tk,s)
            })(document);
        </script>

    </head>
    <body class="">

        <noscript>
            <div class="javascript-disabled">
                <div class="wrapper">
                    <h2>Hey, we noticed you have javascript disabled in your
                        browser.</h2>
                    <p>Enable javascript in your browser to fully experience this
                    website. <a href="http://enable-javascript.com/"
                        target="_blank">Here are some handy instructions!</a></p>
                </div>
            </div>
        </noscript>

<nav class="hero-navigation">
    <div class="hero-nav-wrap">
        <ul class="page-list">
            <li class="logo-wrap index">
            <a class="logo-link" href="." title="Take me home!"><img src="./theme/images/build/ralphsaunders-logo.png" alt="" /></a>
            </li>
        </ul>
    </div>
</nav>
<article class="article cf">
    <header>
        <h1 class="title">Automate sprites with css-sprite &amp; stylus</h1>

        <div class="summary">
            <h2>Using css-sprite and stylus to Automate CSS Sprite Sheets</h2>
        </div>
    </header>

    <p>We all know about the benefits of using CSS sprites right? They've <a href="http://alistapart.com/article/sprites">been around for ages</a>, are generally seen as a good thing to do, and should be considered a standard practice.</p>
<p>They're also a pain in the arse. CSS sprites are time consuming to create, harder to maintain, and you have to go through all that pain again to create retina assets.</p>
<p>This is a conversation you don't want to have when you're manually maintaining CSS sprites:</p>
<blockquote>
<ul>
<li>
<p><em>designer</em> &mdash; "Hey, I've updated this icon. It looks so much better now!"</p>
</li>
<li>
<p><em>front-end developer</em> &mdash; "Oh nice! I'll just put it in the sprite sheet an- ... Hey, <em>designer</em>, it's 2px wider and 1px shorter now... I'm going to have to adjust styles for most of the icons in the sprite sheet :("</p>
</li>
<li>
<p><em>evil* designer</em> &mdash; "HA HA HA! Foiled again, young front-end developer!"</p>
</li>
</ul>
</blockquote>
<p>Yeah, there are techniques to lessen the amount of styles that would need to be adjusted in the &mdash; almost inevitable &mdash; event of this occurring, but the fundamental problem remains.</p>
<h2>npm install *</h2>
<p>At some point between 2004 and now we developed this concept of front-end tooling.</p>
<p>We now have task runners, package managers, CSS frameworks, boilerplates, DOM manipulation libraries, JS helper libraries, event libraries, CSS helpers, dependency managers, template languages, testing frameworks, test runners, code coverage tools, <a href="https://github.com/codylindley/frontend-tools">and so much more</a>!</p>
<p>Front-end tooling is awesome and automates away the pain.</p>
<h2>npm install css-sprite</h2>
<p>There's this node package called <a href="https://www.npmjs.org/package/css-sprite/">css-sprite</a>. It generates CSS sprites. You give it a bunch of images and it gives you one image and a file formatted for the CSS pre-processor of your choice (including vanilla CSS). Check out the <a href="https://github.com/aslansky/css-sprite">Github repo</a>.</p>
<h3>css-sprite + stylus = awesome</h3>
<p>So I've got this directory of Christmas icons because I have no taste or self-restraint when it comes to festive activities... here's what it looks like:</p>
<p><img alt="Source images" src="./images/dist/automatic-css-sprites/src-images.png" /></p>
<p>I ran css-sprite with these configuration options (I'm using gulp as my task runner):</p>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">gulp</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;gulp&#39;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">stylus</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;gulp-stylus&#39;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">gulpif</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;gulp-if&#39;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">sprite</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;css-sprite&#39;</span><span class="p">).</span><span class="nx">stream</span><span class="p">;</span>

<span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="s1">&#39;sprites&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">gulp</span><span class="p">.</span><span class="nx">src</span><span class="p">(</span><span class="s1">&#39;./public/img/src/sprites/*.png&#39;</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">sprite</span><span class="p">({</span>
            <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;_sprites&#39;</span><span class="p">,</span>
            <span class="nx">style</span><span class="o">:</span> <span class="s1">&#39;_sprites.styl&#39;</span><span class="p">,</span>
            <span class="nx">cssPath</span><span class="o">:</span> <span class="s1">&#39;../../../../img/build&#39;</span><span class="p">,</span>
            <span class="nx">processor</span><span class="o">:</span> <span class="s1">&#39;stylus&#39;</span><span class="p">,</span>
            <span class="nx">orientation</span><span class="o">:</span> <span class="s1">&#39;bindary-tree&#39;</span>
        <span class="p">}))</span>
        <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">gulpif</span><span class="p">(</span><span class="s1">&#39;*.png&#39;</span><span class="p">,</span> <span class="nx">gulp</span><span class="p">.</span><span class="nx">dest</span><span class="p">(</span><span class="s1">&#39;./public/img/build/&#39;</span><span class="p">),</span> <span class="nx">gulp</span><span class="p">.</span><span class="nx">dest</span><span class="p">(</span><span class="s1">&#39;./public/css/src/components/&#39;</span><span class="p">)))</span>
<span class="p">});</span>
</pre></div>


<p>Those config options say we want to create an image with the name <code>_sprites</code>, a stylus stylesheet with the name <code>_sprites.styl</code>, the image paths in the eventual compiled CSS file to reference the directory <code>../../../../img/build</code>, to use the <code>stylus</code> pre-processor, and to layout the icons in the generated sprite in a binary tree fashion.</p>
<p>Here's the generated output:</p>
<p><img alt="Build Images + .styl file" src="./images/dist/automatic-css-sprites/build.png" /></p>
<p>And the contents of that <code>_sprites.styl</code> file that's ready to be compiled by stylus at a later time:</p>
<div class="highlight"><pre><span class="p">$</span><span class="nv">light93</span><span class="x"> = -5px -5px 512px 512px</span>
<span class="p">$</span><span class="nv">alarm55</span><span class="x"> = -527px -5px 512px 512px</span>
<span class="p">$</span><span class="nv">bag40</span><span class="x"> = -5px -527px 512px 512px</span>
<span class="p">$</span><span class="nv">balloon9</span><span class="x"> = -527px -527px 512px 512px</span>
<span class="p">$</span><span class="nv">bell47</span><span class="x"> = -1049px -5px 512px 512px</span>
<span class="p">$</span><span class="nv">bell48</span><span class="x"> = -1049px -527px 512px 512px</span>
<span class="p">$</span><span class="nv">bell49</span><span class="x"> = -5px -1049px 512px 512px</span>
<span class="p">$</span><span class="nv">bell50</span><span class="x"> = -527px -1049px 512px 512px</span>
<span class="p">$</span><span class="nv">bible4</span><span class="x"> = -1049px -1049px 512px 512px</span>
<span class="p">$</span><span class="nv">cake17</span><span class="x"> = -1571px -5px 512px 512px</span>
<span class="p">$</span><span class="nv">calendar167</span><span class="x"> = -1571px -527px 512px 512px</span>
<span class="p">$</span><span class="nv">candle11</span><span class="x"> = -1571px -1049px 512px 512px</span>
<span class="p">$</span><span class="nv">candle12</span><span class="x"> = -5px -1571px 512px 512px</span>
<span class="p">$</span><span class="nv">candle13</span><span class="x"> = -527px -1571px 512px 512px</span>
<span class="p">$</span><span class="nv">candy18</span><span class="x"> = -1049px -1571px 512px 512px</span>
<span class="p">$</span><span class="nv">candy19</span><span class="x"> = -1571px -1571px 512px 512px</span>
<span class="p">$</span><span class="nv">candy20</span><span class="x"> = -2093px -5px 512px 512px</span>
<span class="p">$</span><span class="nv">candy21</span><span class="x"> = -2093px -527px 512px 512px</span>
<span class="p">$</span><span class="nv">champagne6</span><span class="x"> = -2093px -1049px 512px 512px</span>
<span class="p">$</span><span class="nv">chimney3</span><span class="x"> = -2093px -1571px 512px 512px</span>
<span class="p">$</span><span class="nv">christmas289</span><span class="x"> = -5px -2093px 512px 512px</span>
<span class="p">$</span><span class="nv">christmas290</span><span class="x"> = -527px -2093px 512px 512px</span>
<span class="p">$</span><span class="nv">christmas291</span><span class="x"> = -1049px -2093px 512px 512px</span>
<span class="p">$</span><span class="nv">christmas292</span><span class="x"> = -1571px -2093px 512px 512px</span>
<span class="p">$</span><span class="nv">christmas293</span><span class="x"> = -2093px -2093px 512px 512px</span>
<span class="p">$</span><span class="nv">coffee114</span><span class="x"> = -2615px -5px 512px 512px</span>
<span class="p">$</span><span class="nv">cookie1</span><span class="x"> = -2615px -527px 512px 512px</span>
<span class="p">$</span><span class="nv">document173</span><span class="x"> = -2615px -1049px 512px 512px</span>
<span class="p">$</span><span class="nv">donut7</span><span class="x"> = -2615px -1571px 512px 512px</span>
<span class="p">$</span><span class="nv">drum23</span><span class="x"> = -2615px -2093px 512px 512px</span>
<span class="p">$</span><span class="nv">eighth4</span><span class="x"> = -5px -2615px 512px 512px</span>
<span class="p">$</span><span class="nv">fireplace3</span><span class="x"> = -527px -2615px 512px 512px</span>
<span class="p">$</span><span class="nv">forest6</span><span class="x"> = -1049px -2615px 512px 512px</span>
<span class="p">$</span><span class="nv">gift67</span><span class="x"> = -1571px -2615px 512px 512px</span>
<span class="p">$</span><span class="nv">gift68</span><span class="x"> = -2093px -2615px 512px 512px</span>
<span class="p">$</span><span class="nv">gingerbread3</span><span class="x"> = -2615px -2615px 512px 512px</span>
<span class="p">$</span><span class="nv">glove7</span><span class="x"> = -3137px -5px 512px 512px</span>
<span class="p">$</span><span class="nv">glove8</span><span class="x"> = -3137px -527px 512px 512px</span>
<span class="p">$</span><span class="nv">grater1</span><span class="x"> = -3137px -1049px 512px 512px</span>
<span class="p">$</span><span class="nv">hat19</span><span class="x"> = -3137px -1571px 512px 512px</span>
<span class="p">$</span><span class="nv">heart302</span><span class="x"> = -3137px -2093px 512px 512px</span>
<span class="p">$</span><span class="nv">horseshoe20</span><span class="x"> = -3137px -2615px 512px 512px</span>
<span class="p">$</span><span class="nv">house159</span><span class="x"> = -5px -3137px 512px 512px</span>
<span class="p">$</span><span class="nv">ice</span><span class="x">-skate = -527px -3137px 512px 512px</span>
<span class="p">$</span><span class="nv">leave1</span><span class="x"> = -1049px -3137px 512px 512px</span>
<span class="p">$</span><span class="nv">angel7</span><span class="x"> = -1571px -3137px 512px 512px</span>
<span class="p">$</span><span class="nv">light94</span><span class="x"> = -2093px -3137px 512px 512px</span>
<span class="p">$</span><span class="nv">lollipop6</span><span class="x"> = -2615px -3137px 512px 512px</span>
<span class="p">$</span><span class="nv">ornament3</span><span class="x"> = -3137px -3137px 512px 512px</span>
<span class="p">$</span><span class="nv">ornament4</span><span class="x"> = -3659px -5px 512px 512px</span>
<span class="p">$</span><span class="nv">ornament5</span><span class="x"> = -3659px -527px 512px 512px</span>
<span class="p">$</span><span class="nv">pen71</span><span class="x"> = -3659px -1049px 512px 512px</span>
<span class="p">$</span><span class="nv">penguin4</span><span class="x"> = -3659px -1571px 512px 512px</span>
<span class="p">$</span><span class="nv">present20</span><span class="x"> = -3659px -2093px 512px 512px</span>
<span class="p">$</span><span class="nv">reindeer3</span><span class="x"> = -3659px -2615px 512px 512px</span>
<span class="p">$</span><span class="nv">reindeer4</span><span class="x"> = -3659px -3137px 512px 512px</span>
<span class="p">$</span><span class="nv">ribbon53</span><span class="x"> = -5px -3659px 512px 512px</span>
<span class="p">$</span><span class="nv">ribbon54</span><span class="x"> = -527px -3659px 512px 512px</span>
<span class="p">$</span><span class="nv">ribbon55</span><span class="x"> = -1049px -3659px 512px 512px</span>
<span class="p">$</span><span class="nv">rocking3</span><span class="x"> = -1571px -3659px 512px 512px</span>
<span class="p">$</span><span class="nv">sack1</span><span class="x"> = -2093px -3659px 512px 512px</span>
<span class="p">$</span><span class="nv">santa</span><span class="x">-claus = -2615px -3659px 512px 512px</span>
<span class="p">$</span><span class="nv">shooting</span><span class="x">-star = -3137px -3659px 512px 512px</span>
<span class="p">$</span><span class="nv">sign16</span><span class="x"> = -3659px -3659px 512px 512px</span>
<span class="p">$</span><span class="nv">sled</span><span class="x"> = -4181px -5px 512px 512px</span>
<span class="p">$</span><span class="nv">snow</span><span class="x">-globe = -4181px -527px 512px 512px</span>
<span class="p">$</span><span class="nv">snowflake146</span><span class="x"> = -4181px -1049px 512px 512px</span>
<span class="p">$</span><span class="nv">snowflake147</span><span class="x"> = -4181px -1571px 512px 512px</span>
<span class="p">$</span><span class="nv">snowing10</span><span class="x"> = -4181px -2093px 512px 512px</span>
<span class="p">$</span><span class="nv">snowman18</span><span class="x"> = -4181px -2615px 512px 512px</span>
<span class="p">$</span><span class="nv">snowman19</span><span class="x"> = -4181px -3137px 512px 512px</span>
<span class="p">$</span><span class="nv">snowman20</span><span class="x"> = -4181px -3659px 512px 512px</span>
<span class="p">$</span><span class="nv">sparkler</span><span class="x"> = -5px -4181px 512px 512px</span>
<span class="p">$</span><span class="nv">stamp12</span><span class="x"> = -527px -4181px 512px 512px</span>
<span class="p">$</span><span class="nv">star179</span><span class="x"> = -1049px -4181px 512px 512px</span>
<span class="p">$</span><span class="nv">star180</span><span class="x"> = -1571px -4181px 512px 512px</span>
<span class="p">$</span><span class="nv">star181</span><span class="x"> = -2093px -4181px 512px 512px</span>
<span class="p">$</span><span class="nv">star182</span><span class="x"> = -2615px -4181px 512px 512px</span>
<span class="p">$</span><span class="nv">star183</span><span class="x"> = -3137px -4181px 512px 512px</span>
<span class="p">$</span><span class="nv">star184</span><span class="x"> = -3659px -4181px 512px 512px</span>
<span class="p">$</span><span class="nv">star185</span><span class="x"> = -4181px -4181px 512px 512px</span>
<span class="p">$</span><span class="nv">stocking1</span><span class="x"> = -4703px -5px 512px 512px</span>
<span class="p">$</span><span class="nv">teddy</span><span class="x"> = -4703px -527px 512px 512px</span>
<span class="p">$</span><span class="nv">thermometer57</span><span class="x"> = -4703px -1049px 512px 512px</span>
<span class="p">$</span><span class="nv">toast</span><span class="x"> = -4703px -1571px 512px 512px</span>
<span class="p">$</span><span class="nv">tree113</span><span class="x"> = -4703px -2093px 512px 512px</span>
<span class="p">$</span><span class="nv">tree114</span><span class="x"> = -4703px -2615px 512px 512px</span>
<span class="p">$</span><span class="nv">tree115</span><span class="x"> = -4703px -3137px 512px 512px</span>
<span class="p">$</span><span class="nv">turkey7</span><span class="x"> = -4703px -3659px 512px 512px</span>
<span class="p">$</span><span class="nv">twig</span><span class="x"> = -4703px -4181px 512px 512px</span>
<span class="p">$</span><span class="nv">wine63</span><span class="x"> = -5px -4703px 512px 512px</span>

<span class="x">sprite-width(</span><span class="p">$</span><span class="nv">sprite</span><span class="x">)</span>
<span class="x">  width </span><span class="p">$</span><span class="nv">sprite</span><span class="x">[2]</span>

<span class="x">sprite-height(</span><span class="p">$</span><span class="nv">sprite</span><span class="x">)</span>
<span class="x">  height </span><span class="p">$</span><span class="nv">sprite</span><span class="x">[3]</span>

<span class="x">sprite-position(</span><span class="p">$</span><span class="nv">sprite</span><span class="x">)</span>
<span class="x">  background-position </span><span class="p">$</span><span class="nv">sprite</span><span class="x">[0]  </span><span class="p">$</span><span class="nv">sprite</span><span class="x">[1]</span>

<span class="x">sprite(</span><span class="p">$</span><span class="nv">sprite</span><span class="x">)</span>
<span class="x">  sprite-position(</span><span class="p">$</span><span class="nv">sprite</span><span class="x">)</span>
<span class="x">  background-repeat no-repeat</span>
<span class="x">  overflow hidden</span>
<span class="x">  display block</span>
<span class="x">  sprite-width(</span><span class="p">$</span><span class="nv">sprite</span><span class="x">)</span>
<span class="x">  sprite-height(</span><span class="p">$</span><span class="nv">sprite</span><span class="x">)</span>

<span class="x">.icon</span>
<span class="x">  background-image url(&#39;../../../../img/build/_sprites.png&#39;)</span>
</pre></div>


<p>This <code>_sprites.styl</code> file can then be referenced by other .styl files in the build...</p>
<p><strong>compile.styl:</strong></p>
<div class="highlight"><pre><span class="n">primary</span><span class="o">-</span><span class="n">color</span> <span class="o">=</span> <span class="nf">rgb</span><span class="p">(</span><span class="mi">185</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">230</span><span class="p">)</span>
<span class="n">primary</span><span class="o">-</span><span class="n">color</span><span class="o">-</span><span class="mi">50</span> <span class="o">=</span> <span class="nf">rgba</span><span class="p">(</span><span class="mi">185</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">230</span><span class="p">,</span> <span class="mf">.5</span><span class="p">)</span>

<span class="cp">@import</span> <span class="s2">&quot;components/_sprites.styl&quot;</span>
<span class="cp">@import</span> <span class="s2">&quot;components/modular&quot;</span>
<span class="cp">@import</span> <span class="s2">&quot;components/main&quot;</span>
</pre></div>


<p><strong>components/modular.styl:</strong></p>
<div class="highlight"><pre><span class="na">.constrained</span> <span class="err">{</span>
    <span class="nl">max-width:</span><span class="err">1180</span><span class="nf">px</span><span class="err">;</span>
    <span class="nl">margin:</span><span class="err">0</span> <span class="nf">auto</span><span class="err">;</span>
<span class="err">}</span>

<span class="na">.candy-20</span> <span class="err">{</span>
    <span class="nf">sprite</span><span class="p">(</span><span class="no">$candy20</span><span class="p">)</span>
<span class="err">}</span>
</pre></div>


<p>Then when compiled by stylus we get this output:</p>
<p><strong>compiled.css:</strong></p>
<div class="highlight"><pre><span class="na">.icon</span> <span class="err">{</span>
  <span class="nl">background-image:</span> <span class="nf">url</span><span class="p">(</span><span class="err">&quot;</span><span class="no">..</span><span class="err">/</span><span class="no">..</span><span class="err">/</span><span class="no">..</span><span class="err">/</span><span class="no">..</span><span class="err">/</span><span class="no">img</span><span class="err">/</span><span class="no">build</span><span class="err">/</span><span class="no">_sprites.png</span><span class="err">&quot;</span><span class="p">)</span><span class="err">;</span>
<span class="err">}</span>
<span class="na">.constrained</span> <span class="err">{</span>
  <span class="nl">max-width:</span> <span class="err">1180</span><span class="nf">px</span><span class="err">;</span>
  <span class="nl">margin:</span> <span class="err">0</span> <span class="nf">auto</span><span class="err">;</span>
<span class="err">}</span>
<span class="na">.candy-20</span> <span class="err">{</span>
  <span class="nl">background-position:</span> <span class="err">-2093</span><span class="nf">px</span> <span class="p">-</span><span class="mi">5</span><span class="no">px</span><span class="err">;</span>
  <span class="nl">background-repeat:</span> <span class="nf">no-repeat</span><span class="err">;</span>
  <span class="nl">overflow:</span> <span class="nf">hidden</span><span class="err">;</span>
  <span class="nl">display:</span> <span class="nf">block</span><span class="err">;</span>
  <span class="nl">width:</span> <span class="err">512</span><span class="nf">px</span><span class="err">;</span>
  <span class="nl">height:</span> <span class="err">512</span><span class="nf">px</span><span class="err">;</span>
<span class="err">}</span>
<span class="na">.primary</span> <span class="err">{</span>
  <span class="nl">background-color:</span> <span class="c">#b905e6;</span>
  <span class="nl">color:</span> <span class="c">#fff;</span>
<span class="err">}</span>
<span class="na">.secondary</span> <span class="err">{</span>
  <span class="nl">background-color:</span> <span class="nf">rgba</span><span class="p">(</span><span class="mi">185</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">230</span><span class="p">,</span><span class="mi">0</span><span class="no">.5</span><span class="p">)</span><span class="err">;</span>
  <span class="nl">color:</span> <span class="c">#fff;</span>
<span class="err">}</span>
</pre></div>


<p>That's it&hellip; CSS sprites without the hassle.</p>
</article>

<div class="hero-footer">
    <div class="hero-footer-wrap">
        <p class="elegant-power">Powered by <a href="http://getpelican.com/" title="Pelican Home Page">Pelican</a>.</p>
    </div>
</div>
        <!-- Javascript -->
        <script src="./theme/js/scripts.js"></script>

        <script>
          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

          ga('create', 'UA-57038003-1', 'auto');
          ga('send', 'pageview');

        </script>

    </body>
</html>